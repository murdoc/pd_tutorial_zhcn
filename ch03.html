<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 3. Audio</title>
<link rel="stylesheet" type="text/css"
href="style.css" />
<!--[if lt IE 8]>
 <link rel="stylesheet" type="text/css"
 href="style_ie55.css" />
 <![endif]-->
<meta name="generator" content="DocBook XSL Stylesheets V1.73.1"><link rel="start" href="index.html" title="Programming Electronic Music in Pd"><link rel="up" href="index.html" title="Programming Electronic Music in Pd"><link rel="prev" href="ch02s02.html" title="2.2 The control level"><link rel="next" href="ch03s02.html" title="3.2 Additive Synthesis"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 3. Audio</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02s02.html"><img src="images/prev.png" width="41" height="20" title="previous" alt="Prev"></a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="p" href="ch03s02.html"><img src="images/next.png" width="41" height="20" title="next" alt="Next"></a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="chapt3"></a>Chapter 3. Audio</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="ch03.html#chapt3.1">3.1 Basics</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch03.html#chapt3.1.1">3.1.1 Pitch</a></span></dt><dt><span class="sect2"><a href="ch03.html#id420457">3.1.2 Volume</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch03s02.html">3.2 Additive Synthesis</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch03s02.html#id422752">3.2.1 Theory</a></span></dt><dt><span class="sect2"><a href="ch03s02.html#id423178">3.2.2 Applications</a></span></dt><dt><span class="sect2"><a href="ch03s02.html#id423446">3.2.3 Appendix</a></span></dt><dt><span class="sect2"><a href="ch03s02.html#id423470">3.2.4 For those especially interested</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch03s03.html">3.3 Subtractive synthesis</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch03s03.html#id423529">3.3.1 Theory</a></span></dt><dt><span class="sect2"><a href="ch03s03.html#id423958">3.3.2 Applications</a></span></dt><dt><span class="sect2"><a href="ch03s03.html#id424124">3.3.3 Appendix</a></span></dt><dt><span class="sect2"><a href="ch03s03.html#id424323">3.3.4 For those especially interested</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch03s04.html">3.4 Sampling</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch03s04.html#id424588">3.4.1 Theory</a></span></dt><dt><span class="sect2"><a href="ch03s04.html#id426491">3.4.2 Applications</a></span></dt><dt><span class="sect2"><a href="ch03s04.html#id427629">3.4.3 Appendix</a></span></dt><dt><span class="sect2"><a href="ch03s04.html#chapt3.4.4">3.4.4 For especially interested</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch03s05.html">3.5 Wave shaping</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch03s05.html#id428536">3.5.1 Theory</a></span></dt><dt><span class="sect2"><a href="ch03s05.html#id429653">3.5.2 Applications</a></span></dt><dt><span class="sect2"><a href="ch03s05.html#id429942">3.5.3 Appendix</a></span></dt><dt><span class="sect2"><a href="ch03s05.html#id430193">3.5.4 For those especially interested</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch03s06.html">3.6 Modulation synthesis</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch03s06.html#id430227">3.6.1 Theory</a></span></dt><dt><span class="sect2"><a href="ch03s06.html#id430644">3.6.2 Applications</a></span></dt><dt><span class="sect2"><a href="ch03s06.html#id430857">3.6.3 Appendix</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch03s07.html">3.7 Granular synthesis</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch03s07.html#id430983">3.7.1 Theory</a></span></dt><dt><span class="sect2"><a href="ch03s07.html#id431485">3.7.2 Applications</a></span></dt><dt><span class="sect2"><a href="ch03s07.html#id431631">3.7.3 Appendix</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch03s08.html">3.8 Fourier analysis</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch03s08.html#id431716">3.8.1 Theory</a></span></dt><dt><span class="sect2"><a href="ch03s08.html#id432343">3.8.2 Applications</a></span></dt><dt><span class="sect2"><a href="ch03s08.html#id432668">3.8.3 Appendix</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch03s09.html">3.9 Amplitude corrections</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch03s09.html#id433175">3.9.1 Theory</a></span></dt><dt><span class="sect2"><a href="ch03s09.html#id433476">3.9.2 Applications</a></span></dt><dt><span class="sect2"><a href="ch03s09.html#id433538">3.9.3 Appendix</a></span></dt><dt><span class="sect2"><a href="ch03s09.html#chapt3.9.4">3.9.4 For those especially interested</a></span></dt></dl></dd></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="chapt3.1"></a>3.1 Basics</h2></div></div></div><p>From here on out, large patches are pre-assembled in additional files (http://www.kreidler-net.de/pd/patches/patches.zip).</p><p>Many of the functions described in Chapter 2 will not be used in the rest of the text - e.g., the 
    "send" and "receive" objects - although they are certainly often used in practice. The patches you'll encounter here have been reduced to the bare essentials. However, when you actually use the techniques presented in a composition or performance, it will be necessary to store them as subpatches and connect them with 
    "inlets"/"outlets", etc. You can see one example of this here:
    <a class="link" href="ch03s04.html#chapt3.4.2.4" title="3.4.2.4 Sampler-player">3.4.2.4</a>.</p><p> </p><hr><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="chapt3.1.1"></a>3.1.1 Pitch</h3></div></div></div><p>Let's return to our first example. You heard a tone with a frequency of 440 Hertz (later with other frequencies, other pitches). You could turn it on and off - i.e., adjust the dynamic from loud to inaudibly quiet. </p><p>About pitch: Pd works with two kinds of pitches - Hertz or MIDI numbers. The traditional signs: A, B-flat, G-sharp, etc. are not used at all in Pd. Instead all chromatic pitches have MIDI numbers: A4 is the number 69, B-flat4 is 70, etc. The other way to describe pitch in Pd is in Hertz. To understand this, we need to understand a bit about musical acoustics. </p><p> </p><hr><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="chapt3.1.1.1"></a>3.1.1.1 Theory</h4></div></div></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="chapt3.1.1.1.1"></a>3.1.1.1.1 Controlling speakers digitally</h5></div></div></div><p>Sound is air in vibration. Traditional instruments are used to vibrate air at specific frequencies. You can do this, e.g.,  with strings (violin), lips (trumpet), or membranes (timpani). We even have a membrane in our ears - the eardrum - that vibrates sympathetically with vibrations in the air. Our brain transforms these vibrations into a different form, which is what we would call sound.</p><p>In electronic music, we use speakers to generate sound. These also have a membrane (or several) that vibrates back and forth, which causes the air to vibrate. </p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1aa.jpg"></div></div><p>The vibrations of this membrane are controlled by the computer. In Pd, the "dac~" object (digital audio converter) handles this. Here's how it works: sound is a physical phenomenon - vibrations in the air to be precise - and, as such, it is analog. <span class="strong"><strong>Computers, however, work only with numbers</strong></span>, which means they are digital. The 
       "dac~" object turns numbers into sound by converting numbers into fluctuations of electrical current that - once amplified - cause the speaker membrane(s) to vibrate accordingly.</p><div class="informalfigure"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="665"><tr><td><img src="images/kap3/3-1-1-1bbb.jpg" width="513"></td></tr></table></div></div><p>The reverse of the this process would be to connect a microphone to a computer. A microphone also has a membrane that responds to vibrations in the air and converts these vibrations into fluctuations in electric current, which it sends to the computer where they are then converted into numbers. In Pd, this input can be received with the "adc~" object.</p><div class="informalfigure"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="675"><tr><td><img src="images/kap3/3-1-1-1cc.jpg" width="513"></td></tr></table></div></div><p>Let's go back to speakers for a moment. A speaker's membrane can move back and forth. The outermost position (the most convex) is understood by the computer as position 1. The innermost position (the most concave) is position -1. When the membrane is precisely in the middle, as when at rest, this is position 0. All other positions are values of between -1 and 1. </p><div class="informalfigure"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="999"><tr><td><img src="images/kap3/3-1-1-1dd.jpg" width="1080"></td></tr></table></div></div><p>In reality, these movements are so small and so fast that they almost cannot be observed with the naked eye.</p><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="chapt3.1.1.1.2"></a>3.1.1.1.2 Waves</h5></div></div></div><p>Let's imagine that a membrane moves from one extreme limit to the next (most convex, most concave) at a constant tempo:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1ee.jpg"></div></div><p>Let's mark the individual stages:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1f.jpg"></div></div><p>In an abstracted form with membrane position on the y-axis and time on the x-axis, we could represent such motion like this:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1g.jpg"></div></div><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1h.jpg"></div></div><p>In physics terminology, this is called a <span class="emphasis"><em>wave</em></span>. Here you can clearly see the 
       <span class="emphasis"><em>waveform</em></span> - a triangle.</p><p>There are different waveforms for different kinds of membrane movement. Their names reflect their visual resemblance:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1i.jpg"></div></div><p>The Pd object "osc~" creates a sine wave.</p><p>One important thing to remember with regard to waveforms: they repeat constantly without changing their motion characteristics. Vibrations that exhibit this quality are said to be <span class="emphasis"><em>periodic</em></span>. A period is one complete cycle of a vibration that constantly repeats.</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1j.jpg"></div></div><p>What makes periodic vibrations special is that we hear them as clear tones with definite pitch. In contrast, noises are aperiodic vibrations.</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1k.jpg"></div></div><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="chapt3.1.1.1.3"></a>3.1.1.1.3 Measurement</h5></div></div></div><p>Let's first discuss periodic vibrations. It is possible to simply count the number of periods in a second. This number is a vibration's frequency and is measured in "Hertz" (<abbr class="abbrev">Hz</abbr>); frequency in this context always means how often something repeats in one second (expressed mathematically: 1/second).</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1l.jpg"></div></div><p>A tone's frequency determines its pitch. A440 (also called A4, the standard pitch that orchestras use for tuning) means that the air vibrates periodically at a rate of 440 times per second; C5 vibrates 523 times per second; the low G on a cello vibrates about 100 times per second.</p><p>Here you can already see: the slower the frequency, the lower the pitch appears to our ear. In fact, humans - depending on age - hear pitches between 20 Hz and 15000 Hz. Children can hear up to 20000 Hz; elderly people can often only hear up to 10000 Hz. Dogs and bats can hear well over 
       20000 Hz. This range is referred to as ultrasonic. In contrast to this is the infrasonic range, which is lower than the bottom of the audible threshold - i.e., between 0 and 20 Hz. This range is perceived by us as rhythm. You can use Pd to experience this for yourself with the following experiment:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1m.jpg"></div></div><p>You hear a rhythm of clicks (that's the sound of a sawtooth wave) that gradually gets faster. After a certain speed (over 20 clicks per second), our perception 'shifts gears' and begins to hear a low pitch. For the air (and for the computer), this is still a "rhythm". But for the human ear (ca. 20 Hz) it's a pitch! The faster this rhythm becomes, the higher the pitch we hear.</p><p>Another defining characteristic of the human ear is that it hears pitches <span class="emphasis"><em>logarithmically</em></span>. This means when a given frequency is doubled, we perceive this as an octave leap. If you change from A4 (440 Hz) to its double (880 Hz), you hear A5, which is exactly one octave higher:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1n.jpg"></div></div><p>If we want to hear an octave above 880 Hz, we have to double it again. 880 + 880 = 1760:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1o.jpg"></div></div><p>Just to be clear: from 30 Hz to 60 Hz, we hear an octave but from 1030 Hz to 1060 Hz, we hear just a small step. In fact, the jump from 10000 Hz to 20000 Hz is only an octave!</p><p>Another important concept: let's add the same amount to a fundamental frequency, say 100 Hz - which is roughly the frequency of the open G-string on a cello -  to which we'll add 100 Hz successively:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1p.jpg"></div></div><p>You hear an octave from 100 to 200, a fifth from 200 to 300, a fourth from 300 to 400, etc. In mathematics, this is an additive process in which the same amount is added each time. Our ears, however, perceive that this amount gets smaller and smaller with every step:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1q.jpg"></div></div><p>The graph on the left shows the mathematical function - a linear function. The right side shows what we hear - a logarithmic function.</p><p>If you want to hear a linear progression - i.e., a process by which the same interval is added, for example the octave - the mathematical function has to be exponential:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1r.jpg"></div></div><p>The conversion from linear to logarithmic progressions in Pd is accomplished by using MIDI numbers and frequencies. MIDI numbers reflect the way we hear in that the intervals we hear correspond to an equivalent interval in MIDI numbers: one whole number per half-step. You can convert entries in frequencies and MIDI numbers in Pd:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1s.jpg"></div></div><p>A small table of MIDI numbers, frequencies, and their traditional names:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1t.jpg"></div></div><p>N.B.: Oscillators like "osc~" or
       "phasor~" have to receive their input in Hertz.</p><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="chapt3.1.1.1.4"></a>3.1.1.1.4 Sample rate</h5></div></div></div><p>One has to remember that for Pd, sound is only numbers. Positions of a speaker's membrane are numbers between -1 and 1.</p><div class="informalfigure"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="923"><tr><td><img src="images/kap3/3-1-1-1dd.jpg" width="1080"></td></tr></table></div></div><p>Objects like "osc~" generate a very fast sequence of numbers between -1 and 1 that is sent to the speaker by the "dac~" object. To be specific, 44100 numbers per second are generated and sent. The loudspeaker makes 44100 tiny movements between -1 and 1 within one second. This number, 44100, is called the sample rate.</p><p>Every sound in Pd is produced using numbers between -1 and 1 at a rate of 44100 numbers per second (sample rate). A single individual number is called a <span class="emphasis"><em>sample.</em></span></p><p>All Pd objects that generate or process data at this speed have a tilde "~" in the object box. These objects are connected to each other with thick cables. We call these series of numbers <span class="emphasis"><em>signals</em></span>.</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1u.jpg"></div></div><p>Whenever you want, you can give the "osc~" object a new frequency as input. The cable for this connection is thin, because the input is not in constant transmission. The 
       "osc~" object's outlet, however, is 
       <span class="emphasis"><em>constantly</em></span> sending signals, i.e., numbers between -1
       and 1, 44100 per second (<span class="emphasis"><em>per second</em></span> means:
       <span class="emphasis"><em>Hertz</em></span>).</p><p>You cannot connect a number box to the "osc~" object's outlet if you want to see the numbers. Number boxes can only be used for control connections, not signal connections. Signal connections are too fast: you wouldn't be able to see 44100 different numbers per second. You can, however, show selected numbers from a signal with the "snapshot~" object. As inputs, it receives the sound signal and a bang that, when clicked, displays the current number when clicked. To see this number, connect either a number box or a "print" object to its output:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1v.jpg"></div></div><p>If you want a constant stream of these numbers, you could attach a (fast) metronome:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1w.jpg"></div></div><p>In Pd-extended, you could also use "unsig~", which automatically connects a metronome. Enter the metronome value as the argument:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-1x.jpg"></div></div><p>You can also use "sig~" to convert numbers on the control level into numbers on the signal level. You enter a value once into its inlet that is sent out its outlet 44100 times per second. </p><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="chapt3.1.1.1.5"></a>3.1.1.1.5 Samples &#8211; milliseconds</h5></div></div></div><p>As with frequency (and with amplitude as discussed in the next chapter), there are   <span class="emphasis"><em>two</em></span> different units in Pd for measuring time: samples and
       milliseconds. Samples are usually used for counting signals while milliseconds are used for control data.</p><p>Converting duration in milliseconds to duration in samples:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-2d.jpg"></div></div><p> </p><p> </p><hr></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="chapt3.1.1.2"></a>3.1.1.2 Applications</h4></div></div></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="id419690"></a>3.1.1.2.1 Tempered &#8211; Random</h5></div></div></div><p>Random MIDI values are gradually offset. (Transition from equal tempered tuning to random tuning):</p><p>
       <a class="ulink" href="patches/3-1-1-2-1-random-offset.pd" target="_top">patches/3-1-1-2-1-random-offset.pd</a>
      </p><div class="informalfigure"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="483"><tr style="height: 411px"><td><img src="images/kap3/3-1-1-2a.jpg" width="483"></td></tr></table></div></div><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="chapt3.1.1.2.2"></a>3.1.1.2.2 More exercises</h5></div></div></div><p>a) Create a glissando that we hear as linear and one that we hear as logarithmic from C3 to C6.</p><p>b) Create a quarter-tone scale.</p><p> </p><p> </p><hr></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="chapt3.1.1.3"></a>3.1.1.3 Appendix</h4></div></div></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="chapt3.1.1.3.1"></a>3.1.1.3.1 Nyquist Theorem</h5></div></div></div><p>The number 44100 was chosen for a good reason. As previously mentioned, humans can hear up to 20000 Hertz at most. In 1928, US physicist Harry Nyquist (1889-1976) proposed a theory stating that a frequency of at least twice the signal frequency was necessary to accurately represent a sound signal digitally ("Nyquist-Shannon sampling theorem").
       Concretely, this means that one needs the maximum and minimum values for each period to accurately represent a waveform's basic shape, i.e., two points per period:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-3a.jpg"></div></div><p>For a wave with 20000 Hz, which equals 20000 periods per second, we need at least 40000 points per second to accurately represent it. To ensure that the entire spectrum of sounds audible to humans was included, a sample rate of 44100 was chosen for audio CDs. This means that waves of up to 22050 Hz could be captured. For computers, a wide selection of frequency bandwidths exist, all the way down to 8000 Hertz for system sounds. High-quality audio recordings work with sample rates of 48000 Hz (48 <abbr class="abbrev">kHz</abbr> = kiloHertz, where kilo = thousand), 96 kHz, or even 192 kHz.</p><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="chapt3.1.1.3.2"></a>3.1.1.3.2 DSP</h5></div></div></div><p>It has become clear that simultaneous processing of numerous signals is very taxing on the computer. Imagine working with 
       100 "osc~" objects. Each one generates 44100 numbers per second and these have to be synchronized with each other. That's why Pd offers you the option of turning off <abbr class="abbrev">DSP</abbr> (digital signal processing) in the main window. This will spare your processor unnecessary work.</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1j.jpg"></div></div><p>You can also send this as a command; the recipient 
       "pd" is in this case the program itself:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-3b.jpg"></div></div><p>With regard to computer music, the faster the processor, the higher the performance.</p><p>Pd lightens its workload by working with samples in blocks rather than individually. This greatly improves performance. The standard block size is 64 samples, but this setting can be changed. More on this at <a class="link" href="ch03s08.html#chapt3.8.1.1" title="3.8.1.1 Analyzing partials">3.8.1.1</a></p><p> </p><p> </p><hr></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="id419992"></a>3.1.1.4 For especially interested</h4></div></div></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="id419999"></a>3.1.1.4.1 da- / ad- conversion</h5></div></div></div><p>It was previously stated that "dac~" sends the numbers generated by Pd to the speaker membrane (<a class="link" href="ch03.html#chapt3.1.1.1" title="3.1.1.1 Theory">3.1.1.1.1</a>), but this is of course a bit oversimplified. Strictly speaking, the computer's sound card converts the numbers into an electrical current with variable voltage ("digital-analog-conversion" or "da-conversion"); the membrane position is in turn determined by the amount of voltage. Going the other way, membrane fluctuations in a microphone are converted into a variable current, which is then digitized by the computer's sound card.</p><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="id420030"></a>3.1.1.4.2 Sound waves</h5></div></div></div><p>Sound waves, in contrast to water waves, are longitudinal. Longitudinal waves, also called compression waves, are characterized by the fact that they vibrate along their direction of movement. (Transverse waves, on the other hand, vibrate along an axis perpendicular to the direction of movement.) For further explanation, please consult a high school physics textbook.</p><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="chapt3.1.1.4.3"></a>3.1.1.4.3 Converting MIDI numbers into frequencies</h5></div></div></div><p>The "mtof" object converts MIDI numbers to frequencies.
The formula for this calculation is:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-4a.jpg"></div></div><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-2c.jpg"></div></div><p>To calculate the frequency of a pitch in equal temperament that is a certain distance away from a given frequency, use this formula:</p><div class="informalfigure"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="88"><tr><td><img src="images/kap3/3-1-1-4d.jpg" width="88"></td></tr></table></div></div><p>'f' is the frequency you want to know, 'g' the frequency of the given pitch, 'a' the interval in half-steps.</p><p>For instance, if you want to calculate the frequency of C5 and know that A4 has a frequency of 440 Hz:</p><div class="informalfigure"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="180"><tr><td><img src="images/kap3/3-1-1-4e.jpg" width="180"></td></tr></table></div></div><p>In Pd:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-4f.jpg"></div></div><p>For the inverse operation - converting a frequency into MIDI - the formula is:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-4b.jpg"></div></div><p>However, in Pd we have only the natural logarithm based on Euler's number (the mathematic constant 'e'); so we need this formula as well:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-4c.jpg"></div></div><p>Programmed in Pd:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-1-2b.jpg"></div></div><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="id420421"></a>3.1.1.4.4 Noise periodicity</h5></div></div></div><p>We've covered the fact that noises are not periodic. You could, however, imagine a noise that lasts 10 seconds and then repeats precisely as before. Such a noise would theoretically have a periodic frequency of 0.1 Hz. So a noise can be more precisely defined as a sound that is aperiodic or has a period of less than 20 Hz. Furthermore, one could also say that the frequencies of noise may have a common fundamental tone that is lower than 20 Hz.</p><p>Many exciting experiments have been conducted in the field of acoustics, for example involving the Doppler effect or calculating the length of sound waves. Please consult leading acoustics textbooks for more information.</p><p> </p><p> </p><hr></div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id420457"></a>3.1.2 Volume</h3></div></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="id420463"></a>3.1.2.1 Theory</h4></div></div></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="chapt3.1.2.1.1"></a>3.1.2.1.1 Measurement</h5></div></div></div><p>The next parameter of a sound we'll look at is its volume. Traditionally, volume in music is notated using dynamic markings like pianissimo, piano, mezzoforte, etc. Their use is subjective and variable depending on the instrument. In physics, which is what Pd uses as a model for this parameter, volume is represented with objective values in deciBel or root mean square values. Both units are comparable to MIDI numbers and frequencies for pitches. DeciBel (<abbr class="abbrev">dB</abbr>) reflect what we hear, where an 'octave' in volume corresponds to 6 dB. The scale ranges from 0 to 130 dB - where a value of between 15 and 20 dB is absolute silence and anything over 120 dB is capable of causing serious hearing damage. After 130 dB we perceive sound only as pain. Root mean square values (<abbr class="abbrev">rms</abbr>), like frequencies, do not correspond to what we hear, but are logarithmic values between 0 and 1, where 0 corresponds to 0 dB and 1 to 100 dB. rms refers to the geometric mean calculated from a series of amplitude values. These numbers are first squared, then the average is taken (by adding all values and dividing by the number of elements), and then the square root of this average is taken. The rms value for an audio signal is first calculated using a portion of the audio signal that lasts specific duration; for a heavily fluctuating signal like a pitch frequency, it gives you an idea of the average signal amplitude.

The following objects can be used to convert from one to the other in Pd:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1a.jpg"></div></div><p>The volume of a vibration is determined by its amplitude, which is the degree to which the membrane is displaced outwards or inwards with respect to the neutral position at rest (the zero position). The greater the membrane's movement, the louder we perceive a sound to be. A representation on an axis looks like this:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1b.jpg"></div></div><p>It cannot be emphasized enough: until this is sent to the speaker with the help of the "dac~" object, Pd works only with numbers. If a sound is quiet, this means that the numbers do not span the full range from -1 to 1, but are instead confined to a more restricted range around the zero position, say, between -0.5 and 0.5. This can be accomplished in a patch by multiplying the numbers generated by the "osc~" object by a certain factor:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1c.jpg"></div></div><p>You can use this method to set the volume to any level from absolute silence to as loud as possible (which depends on the speakers and the amplifier you're using, of course).</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1d.jpg"></div></div><p>You could also attach a slider using HSlider (<span class="strong"><strong>Put </strong></span>  <span class="strong"><strong>HSlider</strong></span>) and setting its range from 0 to 1 (cf. Chapter <a class="link" href="ch02s02.html#chapt2.2.2.3.2" title="2.2.2.3.2 Slider">2.2.2.3.2 </a> and <a class="link" href="ch02s02.html#chapt2.2.4.3.4" title="2.2.2.3.4 Using slider and radio">2.2.4.3.4</a>):</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1e.jpg"></div></div><p>However, moving this slider quickly will result in disruptive sounds. This is because a signal (calculated in samples) clashes with control processing (calculated in milliseconds). If this is only a matter of a few numbers as previously with the factors 0, 0.1, 0.4, 0.7, and 1, this is irrelevant, but beyond a certain speed this can play a significant role. To avoid this problem, you have to replace the control connection with a signal pendant. Use the "sig~" object to convert:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1f.jpg"></div></div><p>This ensures that the numbers generated by the oscillator (44100 numbers/sec) and those generated by the factor ("sig~" converts them into exactly 44100 numbers/sec) are synchronized. N.B.: if a signal is attached to the "*~" object's right inlet, the object must not have an argument: if you were to enter an argument (like 0.5, as used previously) the object would assume that its right input was control data.</p><p>To create a crescendo or a decrescendo, you have to use "line~":</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1g.jpg"></div></div><p>Here's an elegant way to use a slider as a volume regulator 
       ("Potentiometer"):</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1h.jpg"></div></div><p>This executes a small crescendo/decrescendo between every step. Filling in steps with intermediate values in this way is called "interpolation" (as already seen with pitches in Chapter <a class="link" href="ch02s02.html#chapt2.2.3.2.3" title="2.2.3.2.3 Glissando melody">2.2.3.2.3</a>).</p><p>You can calculate the volume of a given sound using "env~", which gives the volume in dB as output. You must always define a span of time in which this average value is to be calculated; its argument is given in samples (this number is usually a power of 2):</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1i.jpg"></div></div><p>The conversion into <abbr class="abbrev">rms</abbr> ...</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1j.jpg"></div></div><p>... makes it clear that factors between 0 and 1 are not to be confused with rms values between 0 and 1.</p><p> As already mentioned, humans' aural perceptions of volume and pitch do not correspond with the measurements in physics (as observed in the paired diagrams for pitches by frequency and interval). A simple trick for creating a more linear crescendo or decrescendo is to square the values:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1k.jpg"></div></div><p>One should try out all the various possibilities, however. In the end, the way that the volume increases or decreases is a compositional decision. What exactly constitutes a "volume octave" cannot be objectified in the same way as pitch.</p><p>There is a GUI-object in Pd for visualizing amplitude: the VU meter (<span class="strong"><strong>Put</strong></span> 
       <span class="strong"><strong>VU</strong></span>). It takes a dB value as input. However, it works like a traditional mixing board: 100 dB is shown as 0 dB and deviations above or below this are shown in the positive or negative range, respectively. You have to take this into account when entering the input. Simply subtract from the "env~" object's output:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1l.jpg"></div></div><p>Then the VU shows changes in volume graphically.
       (<abbr class="abbrev">VU</abbr> is short for "volume").</p><p>In Pd-extended, you can also use the "pvu~" object for the VU meter conversion:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1m.jpg"></div></div><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="chapt3.1.2.1.2"></a>3.1.2.1.2 Problems</h5></div></div></div><p>Another important thing: amplitudes above 1 and below -1 will be 'clipped'. If "dac~" sends the speaker a value outside the range of 1 to -1, the membrane simply stays at the furthest extreme.</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1n.jpg"></div></div><p>Increasing the volume of a sound to the point of 'clipping' results in an effect called <span class="emphasis"><em>overdrive</em></span>.</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1o.jpg"></div></div><p>Another problem occurs when the speaker membrane has to span a large interval suddenly (e.g., when you turn on a sound); the result is a "click":</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1p.jpg"></div></div><p>This is especially noticeable when the sound itself exhibits very smooth membrane movement, as with a sine tone. The "jolt" is easy to see in this illustration:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1q.jpg"></div></div><p>A "jolt" is usually a movement that is faster than 30 ms. To avoid this click, therefore, you need to build what's called a "ramp", i.e., a very fast crescendo at the beginning and end:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1r.jpg"></div></div><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="id421695"></a>3.1.2.1.3 Phase</h5></div></div></div><p>In Pd, you can also set membrane position for a sound wave where it should begin (or where it should jump to). This is called the <span class="emphasis"><em>phase</em></span> of a wave. You can set the phase in Pd in the right inlet of the "osc~" object with numbers between 0 and 1:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1s.jpg"></div></div><p>A wave's entire period is encompassed by the range from 0 to 1. However, it is often spoken of in terms of degrees, where the entire period has 360 degrees. One speaks, for example, of a "90 degree phase shift". In Pd, the input for the phase would be 0.25.</p><p>A phase shift doesn't have much effect on what we hear. We'll return to this concept later, however.</p><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="id421770"></a>3.1.2.1.4 Sound waves are additive</h5></div></div></div><p>Let's say you have these two oscillators:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1t.jpg"></div></div><p>... and you connect them to "dac~". You'd get this:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1u.jpg"></div></div><p>Due to the multiplicative factor, the individual waves only go from -0.5
       to 0.5. Taken together, however, they cover a range from -1 to 1 and have a more complex form. This is because sound waves are <span class="emphasis"><em>additive</em></span>. Simply stated: all vibrations occur in the same air. This additive quality also entails cancellations. Opposed waves, where one is "moving backwards" while the other is "moving forwards" cancel one another out. This is what happens when vibrations that have the same frequency are 180 degrees out of phase:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1v.jpg"></div></div><p>When many sound sources are involved, we usually have to multiply the total sound by a suitable factor to avoid exceeding the limits of 1 and -1:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-1w.jpg"></div></div><p>In this case, both oscillators are simply attached to a multiplication object. This automatically adds them (whenever several signals are given to an object as input, they are first added, then processed according to the object) before carrying out the multiplication.</p><p> </p><p> </p><hr></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="id421986"></a>3.1.2.2 Applications</h4></div></div></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="id421992"></a>3.1.2.2.1 Chord</h5></div></div></div><p>To create a chord with variable volume for every tone in the chord:</p><p>
       <a class="ulink" href="patches/3-1-2-2-1-chord.pd" target="_top">3-1-2-2-1-chord.pd</a>
      </p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-2a.jpg"></div></div><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="id422056"></a>3.1.2.2.2 Glissandi</h5></div></div></div><p>Glissandi that fade in and out smoothly at the beginning and end:</p><p>
       <a class="ulink" href="patches/3-1-2-2-2-glissandi-dim.pd" target="_top">patches/3-1-2-2-2-glissandi-dim.pd</a>
      </p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-2b.jpg"></div></div><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="id422119"></a>3.1.2.2.3 Processing adc-input</h5></div></div></div><p>Say something into a microphone and play it back at a changed volume:</p><p>
       <a class="ulink" href="patches/3-1-2-2-3-edit-input.pd" target="_top">patches/3-1-2-2-3-edit-input.pd</a>
      </p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-2c.jpg"></div></div><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="chapt3.1.2.2.4"></a>3.1.2.2.4 Oscillator concert</h5></div></div></div><p>Let's get 'symphonic': why not use 20 oscillators at once?</p><p>
       <a class="ulink" href="patches/3-1-2-2-4-oscillatorconcert1.pd" target="_top">patches/3-1-2-2-4-oscillatorconcert1.pd</a>
      </p><p>First make the subpatch "o1":</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-2d.jpg"></div></div><p>...make multiple copies...</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-2e.jpg"></div></div><p>...then turn them all on!</p><p>Of course, the parameters for each oscillator can be adjusted &#8211; and you've really got something to play with:</p><p>
       <a class="ulink" href="patches/3-1-2-2-4-oscillatorconcert2.pd" target="_top">patches/3-1-2-2-4-oscillatorconcert2.pd</a>
      </p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-2f.jpg"></div></div><p>The speed of sound at 20 degrees Celsius (68 degrees Fahrenheit) is about 343 meters per second. You can calculate the length of a period in space and then check the result immediately...</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-2g.jpg"></div></div><p>...by moving your head half a meter back and forth while listening to a frequency of 686 Hertz: you can clearly hear the wave's peak and its trough.</p><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="id422411"></a>3.1.2.2.5 More exercises</h5></div></div></div><p>a) Create (random) glissando chords that also have random volume changes for each individual tone.</p><p>b) Create a patch in which the volume from a microphone input controls an oscillator's pitch (then use several, each with a different offset)!</p><p> </p><p> </p><hr></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="id422439"></a>3.1.2.3 Appendix</h4></div></div></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="id422445"></a>3.1.2.3.1 Other tilde objects</h5></div></div></div><p>Several of the objects covered in Chapter 2 also have a version with a tilde. They work the same way, except that they work with signals instead of control data:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-3a.jpg"></div></div><p>You can use "send~" with as many "receive~" objects as you like; however, you can only use one "send~" object:</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-3b.jpg"></div></div><p>You could also channel many different signals to one central location (for example, to the "dac~") by using 
       "throw~" and "catch~":</p><div class="informalfigure"><div class="mediaobject"><img src="images/kap3/3-1-2-3c.jpg"></div></div><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="id422594"></a>3.1.2.3.2 Bit depth</h5></div></div></div><p>Bit depth is also an important concept in Pd. The computer's processor only works with binary code, i.e., with 0 and 1. The bit number shows how many places are used for zeroes or ones. If you have only two places, you could make 2<sup>2</sup>, that is, 4 different combinations:</p><pre class="programlisting">
       0 0
       0 1
       1 1
       1 0
      </pre><p>The more places there are, the more detailed something can be processed. For Pd, which uses numbers to calculate frequencies, amplitude, etc., this means that the numbers can be processed more precisely, i.e., more decimal places can be used. Pd normally works with 16 bit, which is the quality of an audio CD. 16 bit means 2<sup>16</sup> = 65,536 possible values for each sample. </p><p> </p><p> </p><hr></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="id422642"></a>3.1.2.4 For those especially interested</h4></div></div></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="id422649"></a>3.1.2.4.1 Sound pressure vs. sound intensity</h5></div></div></div><p>Volume and more importantly increments of volume are - in both objective and subjective terms - heavily influenced by factors like architectural characteristics of the room, age of the listener, etc. There is no single, precise form of measurement for volume, though there are theories of sound pressure and sound intensity. For more information, it is strongly recommended that you consult a book about acoustics.</p><p> </p><hr></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="id422671"></a>3.1.2.4.2 Control data vs. signals</h5></div></div></div><p>You may have noticed that for significant parts of sound production in Pd two different units are used: frequency and MIDI numbers for pitch, root mean square and deciBel for amplitude, and milliseconds and samples for time.</p><p>For the last of these, the example of using "line~" to create a crescendo/decrescendo given under section 3.1.2.1.1. should be explained further: </p><p>If you were to use a "line" object (without a tilde) for this, it would likely result in undesired popping or clipping sounds. This would require two different units of time measurement to be combined; the problem is they are not synchronized. The different numeric intervals will likely not match up, which would cause irregularities in the form of short delays or even popping sounds to occur.</p><p> As described in Chapter <a class="link" href="ch02s02.html#chapt2.2.3.3.2" title="2.2.3.3.2 Time resolution for control data">2.2.3.3.2</a>, "line" generates a value every 20 milliseconds. That means it may not coincide with the samples. Though a new sample comes every 0.02 milliseconds, a "line" value may not coincide with a more or less simultaneous sample, which could lead to complications. A "line~" object (with tilde), however, generates a signal with 44100 values per second. These 44100 values are generated at precisely the same time as any another tilde object; they are always synchronized. The computer always processes 44100 samples per second synchronously regardless of their position in the patch.</p><p> </p><p> </p><hr></div></div></div></div></div><div class="navfooter"></p> <p><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02s02.html"><img src="images/prev.png" width="41" height="20" title="previous" alt="Prev"></a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="p" href="ch03s02.html"><img src="images/next.png" width="41" height="20" title="next" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">2.2 The control level </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 3.2 Additive Synthesis</td></tr></table></div></body></html>
